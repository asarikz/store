@(
  addr: Address,
  currency: CurrencyInfo,
  subTotal: BigDecimal,
  paypalId: String,
  paypalWebPaymentPlusUrl: String,
  successUrl: String,
  cancelUrl: String,
  debug: Boolean
)(
  implicit lang: Lang,
  request: RequestHeader,
  loginSession: LoginSession
)

@main(Messages("paypalWebPaymentStartTitle"), Some(loginSession)) {
  <script>
      @if(! debug) {
        $(function() {
          $("#startWebPaymentPlusForm").submit();
        });
      }
  </script>
} {
  <h1 class="title">@Messages("paypalWebPaymentStartTitle")</h1>

  <form action="@paypalWebPaymentPlusUrl" method="post" id="startWebPaymentPlusForm">
    @if(debug) {
      <label for="cmd">cmd</label><input id="cmd" type="text" name="cmd" value="_hosted-payment"><br>
      <label for="subtotal">subtotal</label><input id="subtotal" type="text" name="subtotal" value="@subTotal"><br>
      <label for="business">business</label><input id="business" type="text" name="business" value="@paypalId"><br>
      <label for="paymentaction">paymentaction</label><input id="paymentaction" type="text" name="paymentaction" value="sale"><br>
      <label for="return">return</label><input id="return" type="text" name="return" value="@successUrl"><br>
      <label for="cbt">cbt</label><input id="cbt" type="text" name="cbt" value="ショッピングカートへ戻る"><br>
      <label for="cancel_return">cancel_return</label><input id="cancel_return" type="text" name="cancel_return" value="@cancelUrl"><br>
      <label for="currency_code">currency_code</label><input id="currency_code" type="text" name="currency_code" value="@currency.currencyCode"><br>

<!--
<input type="hidden" name="showCustomerName" value="false">
<input type="hidden" name="showBillingAddress" value="false">
<input type="hidden" name="showBillingPhone" value="false">
<input type="hidden" name="showBillingEmail" value="false">
-->

      <label for="address1">address1</label><input id="address1" type="text" name="address1" value="@addr.address2"><br>
      <label for="address2">address2</label><input id="address2" type="text" name="address2" value="@addr.address3"><br>
      <label for="first_name">first_name</label><input id="first_name" type="text" name="first_name" value="@addr.lastName"><br>
      <label for="last_name">last_name</label><input id="last_name" type="text" name="last_name" value="@addr.firstName"><br>
      <label for="country">country</label><input id="country" type="text" name="country" value='@PaypalCountry(addr.countryCode)'><br>
      <label for="city">city</label><input id="city" type="text" name="city" value='@addr.address1'><br>
      <label for="state">state</label><input id="state" type="text" name="state" value='@PaypalPrefecture(addr.prefecture).getOrElse("")'><br>
      <label for="zip">zip</label><input id="zip" type="text" name="zip" value="@{addr.zip1+addr.zip2+addr.zip3}"><br>
      <label for="buyer_email">buyer_email</label><input id="buyer_email" type="text" name="buyer_email" value="@addr.email"><br>
      <label for="night_phone_c">night_phone_b</label><input id="night_phone_c" type="text" name="night_phone_c" value="@addr.tel1"><br>
      <input type="submit" name="METHOD" value="Pay">
    } else {
      <input type="hidden" name="cmd" value="_hosted-payment">
      <input type="hidden" name="subtotal" value="@subTotal">
      <input type="hidden" name="business" value="@paypalId">
      <input type="hidden" name="paymentaction" value="sale">
      <input type="hidden" name="return" value="@successUrl">
      <input type="hidden" name="cancel_return" value="@cancelUrl">
      <input type="hidden" name="currency_code" value="@currency.currencyCode">
    }
  </form>

  @if(debug) {
    <a href="@successUrl">Skip paypal</a>
    <a href="@cancelUrl">Cancel paypal</a>
  }
}
