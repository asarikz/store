@(users: Seq[(StoreUser, Option[SiteUser], Option[Site])])(
  implicit token: play.filters.csrf.CSRF.Token,
  lang: Lang,
  request: RequestHeader,
  loginSession: LoginSession
)

@import helper._

@main(Messages("editUserTitle"), Some(loginSession)) {
<h1 class="title">@Messages("editUserTitle")</h1>

<table class="userTable">
  <tr class="userTableHeader">
    <th class="id">id</th>
    <th class="name">@Messages("userName")</th>
    <th class="fullName">@Messages("name")</th>
    <th class="company">@Messages("companyName")</th>
    <th class="email">@Messages("email")</th>
    <th class="role">@Messages("role")</th>
  </tr>
  @users.map { user =>
    <tr class="userTableBody">
      <td class="id">@user._1.id.get</td>
      <td class="name">@user._1.userName</td>
      <td class="fullName">@name(user._1)</td>
      <td class="company">@user._1.companyName.getOrElse("")</td>
      <td class="email">@user._1.email</td>
      <td class="role">
        @form(action = helper.CSRF(routes.UserMaintenance.deleteUser(user._1.id.get))) {
          <input type="submit" style="float: left;" value=@Messages("remove")>
        }
        @{
          if (user._1.userRole == UserRole.ADMIN) {
            Messages("admin.user")
          } else {
            user._3 match {
              case None => Messages("normal.user")
              case Some(site) => Messages("site.owner") + "(" + site.name + ")"
            }
          }
       }
      </td>
    </tr>
  }
</table>

<br>
  <a href="@routes.Admin.index()">
    @Messages("backTo", Messages("adminTitle"))
  </a>
}

